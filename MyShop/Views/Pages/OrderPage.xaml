<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="MyShop.Views.Pages.OrderPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:MyShop.Views.Pages"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Padding="20" Background="{ThemeResource SystemChromeLowColor}">
            <TextBlock Text="Orders Management" Style="{StaticResource HeaderTextBlockStyle}" Margin="0,0,0,10"/>
            <TextBlock Text="List of all orders" Style="{StaticResource SubtitleTextBlockStyle}" Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}"/>
            <StackPanel Orientation="Horizontal" Spacing="10" Margin="0,10,0,0">
                <Button x:Name="AddOrderButton" Content="Add Order" Click="OnAddOrderClicked"/>
                <Button x:Name="SortAscButton" Content="Sort by ID (Asc)" Click="OnSortAscendingClicked"/>
            </StackPanel>
        </StackPanel>

        <!-- DataGrid -->
        <Grid Grid.Row="1" Padding="20">
            <controls:DataGrid
                x:Name="OrdersDataGrid"
                AutoGenerateColumns="False"
                CanUserReorderColumns="True"
                CanUserResizeColumns="True"
                GridLinesVisibility="All"
                BorderThickness="1"
                BorderBrush="{ThemeResource SystemControlForegroundBaseLowBrush}">

                <controls:DataGrid.Columns>
                    <!-- Order ID Column -->
                    <controls:DataGridTextColumn
                        Header="Order ID"
                        Binding="{Binding OrderId}"
                        Width="80"/>

                    <!-- Created Date Column -->
                    <controls:DataGridTextColumn
                        Header="Created At"
                        Binding="{Binding CreatedTime}"
                        Width="160"/>

                    <!-- Total Amount Column -->
                    <controls:DataGridTextColumn
                        Header="Total Price (₫)"
                        Binding="{Binding FinalPrice}"
                        Width="140"/>

                    <!-- Status Column -->
                    <controls:DataGridTextColumn
                        Header="Status"
                        Binding="{Binding Status}"
                        Width="100"/>

                    <!-- Items Count Column -->
                    <controls:DataGridTextColumn
                        Header="Items"
                        Binding="{Binding OrderItems.Count}"
                        Width="80"/>

                    <!-- Actions Column -->
                    <controls:DataGridTemplateColumn
                        Header="Action"
                        Width="150">
                        <controls:DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <Button Content="View" Height="32"/>
                                    <Button Content="Delete" Height="32" Click="OnDeleteOrderClicked"/>
                                </StackPanel>
                            </DataTemplate>
                        </controls:DataGridTemplateColumn.CellTemplate>
                    </controls:DataGridTemplateColumn>
                </controls:DataGrid.Columns>
            </controls:DataGrid>
        </Grid>
    </Grid>
</Page>